<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英語かるた</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <h1>英語かるた</h1>

        <div id="setup" class="screen">
            <div class="setting-item">
                <label for="test-date">実施日:</label>
                <input type="date" id="test-date">
            </div>
            <div class="setting-item">
                <label for="grade-set">学年とセット:</label>
                <select id="grade-set">
                    <option value="">選択してください</option>
                    <option value="list03">3年セット</option>
                    <option value="list04">4年セット</option>
                </select>
            </div>
            <div class="setting-item">
                <label for="voice-select">音声:</label>
                <select id="voice-select"></select>
            </div>
            <div class="setting-item">
                <label for="mode">モード:</label>
                <select id="mode">
                    <option value="normal">通常モード</option>
                    <option value="random">ランダムモード</option>
                </select>
            </div>
            <div class="setting-item normal-mode-only">
                <label for="level">レベル:</label>
                <select id="level">
                    <option value="easy">かんたん</option>
                    <option value="normal">ふつう</option>
                    <option value="hard">むずかしい</option>
                </select>
            </div>
            <div class="button-group">
                <button onclick="startGame()">テスト開始</button>
                <button onclick="showHistory()">記録を見る</button>
            </div>
        </div>

        <div id="quiz" class="screen" style="display:none;">
            <p id="progress"></p>
            <div id="image-grid"></div>
            <div id="current-question"></div>
            <div class="button-group">
                <button onclick="showNormalMode()">通常モード</button>
                <button onclick="showASpeechMode()">Aを話す</button>
                <button onclick="showBSpeechMode()">Bを話す</button>
            </div>
            <div class="button-group">
                <button onclick="answer(true)">できた</button>
                <button onclick="answer(false)">できなかった</button>
            </div>
            <button onclick="interruptTest()">中断してメニューに戻る</button>
        </div>

        <div id="karuta-game" class="screen" style="display:none;">
            <div id="timer">0:00</div>
            <div id="image-grid">
                </div>
            <div class="button-group">
                <button onclick="startKarutaGame()">スタート</button>
                <button onclick="quitKarutaGame()">中断してメニューに戻る</button>
            </div>
        </div>

        <div id="result" class="screen" style="display:none;">
            <h2>結果</h2>
            <p id="score"></p>
            <div id="current-result-table"></div> <div class="button-group">
                <button onclick="saveResult()">記録を保存</button>
                <button onclick="location.reload()">もう一度</button>
            </div>
        </div>

        <div id="history" class="screen" style="display:none;">
            <h2>過去の記録</h2>
            <div id="history-list-table"></div>
            <button onclick="location.reload()">戻る</button>
        </div>

        <div id="modal" class="modal">
            <div class="modal-content">
                <p id="modal-message"></p>
                <div class="modal-buttons">
                    <button id="modal-ok">OK</button>
                    <button id="modal-cancel" style="display:none;">キャンセル</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
